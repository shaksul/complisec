Динамическая модель ролей и прав
1. Основная идея

Нет фиксированного списка ролей.

Каждая организация (тенант) может сама создать роли.

Для каждой роли можно выбрать набор прав (permissions).

Пользователи получают одну или несколько ролей → из них формируется итоговый доступ.

2. Сущности
🔹 Роли (Role)

Создаются администратором организации.

Содержат только название и описание.

Не имеют предустановленных прав.

🔹 Права (Permission)

Хранятся в системе как атомарные действия.

Примеры:

document.read

document.upload

incident.create

incident.close

user.manage

training.assign

Группируются по модулям (Документы, Активы, Инциденты, Обучение, ИИ и т.д.).

🔹 Связка Роль ↔ Права (RolePermission)

Администратор может добавить/убрать любое право в роль.

Таким образом формируется кастомный набор доступов.

🔹 Пользователь ↔ Роли (UserRole)

Пользователь может иметь несколько ролей.

Итоговый доступ формируется объединением прав всех ролей.

3. Пример сценария

Админ создаёт роль “Менеджер обучения”.

Назначает права:

document.read

training.assign

training.view_progress

Назначает эту роль конкретным пользователям.

Пользователь видит только доступные разделы и действия.

4. Дополнительно

Атрибуты доступа (ABAC)
Внутри права можно ограничить условия:

только по своей организации

только по подразделению

только опубликованные документы

доступ на время (временные права)

Аудит
Все изменения в ролях и правах логируются.

Шаблоны ролей
Можно предложить готовые пресеты (например, “Админ”, “Пользователь”), но админ может их редактировать или создавать новые.

5. Структура БД (упрощённо)
users (id, name, email, org_id, ...)
roles (id, name, description, org_id)
permissions (id, code, module, description)
role_permissions (role_id, permission_id)
user_roles (user_id, role_id)
audit_log (id, user_id, action, timestamp, details)


⚡ В итоге администратор сам решает, какие роли будут в организации и какие у них права.
Система изначально хранит только набор атомарных прав, а остальное динамическое.

Раздел «Управление пользователями»
📍 Где располагается

В главном меню системы (слева или сверху, в зависимости от макета) будет блок «Администрирование».

Внутри него — подразделы:

Пользователи 👤

Роли и права 🛡️

Организации (тенанты) 🏢 (если включена мультитенантность)

Аудит действий 📜

🖥️ Структура раздела «Пользователи»
1. Список пользователей

Таблица с возможностью фильтрации и поиска.
Столбцы:

ФИО / Логин / Email

Организация

Роли (с иконками или тегами)

Статус (Активен / Заблокирован / Временно отключен)

Дата создания

Последний вход

🔧 Действия (в выпадающем меню или иконками справа):

✏️ Редактировать

🛡️ Назначить роли

🔒 Заблокировать / Разблокировать

❌ Удалить

2. Карточка пользователя

При клике на пользователя открывается карточка (в отдельной вкладке или боковой панели):

Общая информация (ФИО, Email, Телефон, Организация, Подразделение).

Активные роли (с возможностью снять галочку или добавить).

История входов и действий.

Кнопка «Сбросить пароль / Отправить приглашение».

3. Добавление пользователя

Форма «Добавить пользователя»:

Имя, фамилия, логин/email

Организация (если несколько)

Подразделение

Первичный пароль (или «Отправить приглашение по email»)

Назначение ролей (чекбокс-лист)

4. Роли и права

Отдельная вкладка:

Список ролей

Возможность создать роль → дать ей название → назначить права (чекбокс-лист атомарных прав).

При выборе роли видно список пользователей, у кого она назначена.

🎨 Визуальное расположение (приблизительно)
📂 Администрирование
   ├── 👤 Пользователи
   │      [Поиск] [Фильтр]
   │
   │  ┌───────────────────────────────────────────┐
   │  │ ФИО     | Email      | Роли    | Статус   │
   │  ├─────────┼────────────┼─────────┼──────────┤
   │  │ Иванов  | iv@org.kz  | Admin   | Активен  │ ✏️ 🛡️ 🔒 ❌
   │  │ Петров  | pt@org.kz  | User    | Заблок.  │ ✏️ 🛡️ 🔒 ❌
   │  └───────────────────────────────────────────┘
   │
   │   [+ Добавить пользователя]
   │
   └── 🛡️ Роли и права
   └── 🏢 Организации
   └── 📜 Аудит

🚀 Плюсы такой логики

Масштабируемо: роли и права можно менять динамически.

Удобно: администратор сразу видит пользователей, их статусы и роли.

Безопасно: всегда есть быстрый доступ к блокировке/разблокировке.

Прозрачно: всё фиксируется в журнале аудита.



