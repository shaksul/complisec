RAG-—Å–∏—Å—Ç–µ–º—ã –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ —Å ¬´–∫–∞–∫–∏–º-—Ç–æ –æ–¥–Ω–∏–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º¬ª, –∞ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å, —Ä–∞–∑–±–∏–≤–∞—Ç—å –Ω–∞ —á–∞–Ω–∫–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –≤ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏. –§–æ—Ä–º–∞—Ç –≤—ã–±–∏—Ä–∞—é—Ç –ø–æ–¥ –∑–∞–¥–∞—á—É –∏ —Ç–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

üîë –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –≤—ã–±–æ—Ä–∞ —Ñ–æ—Ä–º–∞—Ç–∞

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
–ß–µ–º –±–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω —Ç–µ–∫—Å—Ç (JSON, Markdown, —Ç–∞–±–ª–∏—Ü—ã), —Ç–µ–º –ø—Ä–æ—â–µ –≤—ã–¥–µ–ª—è—Ç—å —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏.
–°—ã—Ä—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (PDF, DOCX, —Å–∫–∞–Ω—ã) —Ç—Ä–µ–±—É—é—Ç OCR/–ø–∞—Ä—Å–∏–Ω–≥–∞.

–¢–µ–∫—Å—Ç–æ–≤–∞—è —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è
–ò—Ç–æ–≥–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —á–∏—Å—Ç–æ–º —Ç–µ–∫—Å—Ç–µ (UTF-8) –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤. –î–∞–∂–µ –µ—Å–ª–∏ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —ç—Ç–æ DOCX –∏–ª–∏ PDF, –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ –∏—Ö –ø—Ä–∏–≤–æ–¥—è—Ç –∫ plain text –∏–ª–∏ HTML-–ø–æ–¥–æ–±–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.

–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
–í–∞–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ —Ö—Ä–∞–Ω–∏—Ç—å, –Ω–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∑–∞—Ç—å –Ω–∞ —á–∞–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 500‚Äì1000 —Ç–æ–∫–µ–Ω–æ–≤). –¢—É—Ç –ø–æ–º–æ–≥–∞–µ—Ç Markdown/JSON, –≥–¥–µ –µ—Å—Ç—å —è–≤–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Å–ø–∏—Å–∫–∏, –ø–æ–ª—è.

üìÇ –§–æ—Ä–º–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—â–µ –≤—Å–µ–≥–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

JSON ‚Äì –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–Ω–∞–Ω–∏–π –≤ –≤–∏–¥–µ –∑–∞–ø–∏—Å–µ–π (Q&A, –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –ø–æ–ª–∏—Ç–∏–∫–∏). –£–¥–æ–±–µ–Ω –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º.

Markdown / HTML ‚Äì —Ö–æ—Ä–æ—à–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤ —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π, –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, —Å–ø–∏—Å–∫–∞–º–∏. RAG-—Å–∏—Å—Ç–µ–º–∞ –ø–æ–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ª–µ–≥—á–µ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç.

Plain text (TXT, UTF-8) ‚Äì –±–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏. –£–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω, –Ω–æ –±–µ–∑ —Ä–∞–∑–º–µ—Ç–∫–∏.

Parquet / CSV ‚Äì –∫–æ–≥–¥–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ —Ç–∞–±–ª–∏—á–Ω—ã–µ (—Ä–µ–µ—Å—Ç—Ä—ã –∞–∫—Ç–∏–≤–æ–≤, –±–∞–∑—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤).

PDF / DOCX ‚Äì –¥–æ–ø—É—Å—Ç–∏–º—ã –∫–∞–∫ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏, –Ω–æ –ø–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π –≤ RAG –∏—Ö –Ω—É–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, pdfplumber, docx2txt) –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ç–µ–∫—Å—Ç –∏–ª–∏ JSON.

üß† –ü—Ä–∏–º–µ—Ä –ø–∞–π–ø–ª–∞–π–Ω–∞ –¥–ª—è RAG

–°–æ–±—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (PDF, DOCX, XLSX).

–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã ‚Üí –ø–æ–ª—É—á–∏—Ç—å —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç.

–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ JSON —Å –ø–æ–ª—è–º–∏:

{
  "id": "doc-123",
  "title": "–ü–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏",
  "section": "–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞",
  "content": "–û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä...",
  "tags": ["ISO27001", "AccessControl"]
}


–ù–∞—Ä–µ–∑–∞—Ç—å –Ω–∞ —á–∞–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ 800 —Å–∏–º–≤–æ–ª–æ–≤ —Å overlap 200).

–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Pinecone, Weaviate, Qdrant).

üöÄ –í—ã–≤–æ–¥

–õ—É—á—à–∏–π —Ä–∞–±–æ—á–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è RAG ‚Äî JSON –∏–ª–∏ Markdown –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ:

–ª–µ–≥–∫–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ,

–ø—Ä–æ—Å—Ç–æ —á–∞–Ω–∫–∞—Ç—å,

—É–¥–æ–±–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ.

üìå –ù–æ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö RAG –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —á–µ–º —É–≥–æ–¥–Ω–æ (PDF, DOCX, –±–∞–∑—ã), –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä ‚Üí —Ç–µ–∫—Å—Ç ‚Üí JSON.

–•–æ—Ç–∏—Ç–µ, —è —Å–æ–±–µ—Ä—É –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω JSON –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–æ–ª–∏—Ç–∏–∫–∏, —Ä–∏—Å–∫–∏, –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã, –∞–∫—Ç–∏–≤—ã), —á—Ç–æ–±—ã —Å—Ä–∞–∑—É –º–æ–∂–Ω–æ –±—ã–ª–æ —Å—Ç—Ä–æ–∏—Ç—å RAG-–ø–æ–∏—Å–∫?

–í—ã —Å–∫–∞–∑–∞–ª–∏:
–¥–∞
ChatGPT —Å–∫–∞–∑–∞–ª:
–î—É–º–∞–ª

–û—Ç–≤–µ—á—É –∫–∞–∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏ —ç–∫—Å–ø–µ—Ä—Ç –ø–æ RAG-—Å–∏—Å—Ç–µ–º–∞–º –º–∏—Ä–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è.

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è):

–ö–æ—Ä–æ—Ç–∫–æ: —á—Ç–æ –¥–∞—é. 2) –ö–∞–∫ —ç—Ç–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. 3) –®–∞–±–ª–æ–Ω—ã JSON Schema (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π + —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ). 4) –ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. 5) –°—Ö–µ–º–∞ —á–∞–Ω–∫–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞. 6) –ü—Ä–∞–≤–∏–ª–∞ –Ω–∞—Ä–µ–∑–∫–∏/–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏. 7) –ú–∏–Ω–∏-—á–µ–∫-–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –≤–∞—à –ø–∞–π–ø–ª–∞–π–Ω.

1) –ö–æ—Ä–æ—Ç–∫–æ

–ù–∏–∂–µ ‚Äî –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è RAG CompliSec/RiskNexus:

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π JSON Schema –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–Ω–∞–Ω–∏–π.

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ö–µ–º—ã –¥–ª—è: policy, risk, incident, asset, control, training_material, audit_record.

–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —á–∞–Ω–∫–æ–≤ –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞/—ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤.

–ñ—ë—Å—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏, –≤–µ—Ä—Å–∏–∏, –º–µ—Ç–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è (ISO 27001 –∏ –¥—Ä.).

–í—Å–µ —Å—Ö–µ–º—ã –±–µ–∑ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–≤, –≥–æ—Ç–æ–≤—ã ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª.

2) –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è (–ø–æ —à–∞–≥–∞–º)

–ü—Ä–∏ –∏–Ω–∂–µ—Å—Ç–µ –ª—é–±–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (PDF/DOCX/HTML/CSV) –ø—Ä–∏–≤–æ–¥–∏—Ç–µ –∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–º—É JSON (–Ω–∏–∂–µ).

–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–º JSON Schema.

–†–µ–∂—å—Ç–µ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 6 ‚Üí —Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ chunks.jsonl –ø–æ —Å—Ö–µ–º–µ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ 5.

–ü–∏—à–∏—Ç–µ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: embedding, metadata –∏–∑ —á–∞–Ω–∫–∞.

–í —Ä–∞–Ω—Ç–∞–π–º–µ —Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ/—Ä–∞–Ω–∂–∏—Ä—É–π—Ç–µ –ø–æ doc_type, tenant_id, tags, compliance_mappings.*, language, confidentiality.

–í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ—Ä–∏–≥–∏–Ω–∞–ª –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏.

3) –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (JSON Schema Draft 2020-12)
{
  "$id": "https://complisec.local/schemas/base_document.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CompliSec Base Document",
  "type": "object",
  "required": [
    "id",
    "tenant_id",
    "doc_type",
    "title",
    "language",
    "content",
    "source",
    "version",
    "created_at",
    "updated_at"
  ],
  "properties": {
    "id": {
      "type": "string",
      "description": "UUID v4 –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
    },
    "tenant_id": {
      "type": "string",
      "description": "UUID v4 –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
    },
    "doc_type": {
      "type": "string",
      "enum": [
        "policy",
        "risk",
        "incident",
        "asset",
        "control",
        "training_material",
        "audit_record",
        "other"
      ]
    },
    "title": { "type": "string", "minLength": 1 },
    "summary": { "type": "string" },
    "language": {
      "type": "string",
      "description": "BCP-47",
      "pattern": "^[A-Za-z]{2}(-[A-Za-z0-9-]+)*$"
    },
    "tags": {
      "type": "array",
      "items": { "type": "string" },
      "uniqueItems": true
    },
    "source": {
      "type": "object",
      "required": ["ingest_method", "origin_name"],
      "properties": {
        "ingest_method": { "type": "string", "enum": ["upload", "crawler", "api", "manual"] },
        "origin_name": { "type": "string" },
        "origin_uri": { "type": "string" },
        "file_mime": { "type": "string" },
        "checksum_sha256": { "type": "string", "pattern": "^[0-9a-f]{64}$" }
      },
      "additionalProperties": false
    },
    "version": {
      "type": "object",
      "required": ["number", "status"],
      "properties": {
        "number": { "type": "string", "description": "—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä—Å–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä 1.0.0" },
        "status": { "type": "string", "enum": ["draft", "approved", "deprecated"] },
        "valid_from": { "type": "string", "format": "date-time" },
        "valid_to": { "type": "string", "format": "date-time" }
      },
      "additionalProperties": false
    },
    "classification": {
      "type": "object",
      "properties": {
        "confidentiality": { "type": "string", "enum": ["public", "internal", "restricted", "confidential"] },
        "integrity": { "type": "string", "enum": ["low", "medium", "high"] },
        "availability": { "type": "string", "enum": ["low", "medium", "high"] }
      },
      "additionalProperties": false
    },
    "compliance_mappings": {
      "type": "array",
      "description": "–ü—Ä–∏–≤—è–∑–∫–∏ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è",
      "items": {
        "type": "object",
        "required": ["standard", "clause"],
        "properties": {
          "standard": { "type": "string", "enum": ["ISO27001", "ISO27002", "NIST800-53", "SOC2", "GDPR", "ST-RK-27002"] },
          "clause": { "type": "string" },
          "level": { "type": "string", "enum": ["must", "should", "informative"] }
        },
        "additionalProperties": false
      },
      "uniqueItems": false
    },
    "relations": {
      "type": "object",
      "properties": {
        "related_ids": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
          },
          "uniqueItems": true
        }
      },
      "additionalProperties": false
    },
    "owners": {
      "type": "object",
      "properties": {
        "author": { "type": "string" },
        "reviewers": { "type": "array", "items": { "type": "string" }, "uniqueItems": true },
        "approver": { "type": "string" }
      },
      "additionalProperties": false
    },
    "content": {
      "type": "object",
      "required": ["format", "body"],
      "properties": {
        "format": { "type": "string", "enum": ["markdown", "plain", "html", "json"] },
        "body": { "type": "string" },
        "sections": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["title", "text"],
            "properties": {
              "number": { "type": "string" },
              "title": { "type": "string" },
              "text": { "type": "string" },
              "anchor": { "type": "string" }
            },
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "custom": {
      "type": "object",
      "description": "–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ doc_type",
      "additionalProperties": true
    },
    "created_at": { "type": "string", "format": "date-time" },
    "updated_at": { "type": "string", "format": "date-time" },
    "deleted_at": { "type": "string", "format": "date-time" }
  },
  "additionalProperties": false
}

–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥-—Å—Ö–µ–º—ã (–≤—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ custom)

3.1 policy

{
  "$id": "https://complisec.local/schemas/policy.custom.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Policy Custom Fields",
  "type": "object",
  "required": ["policy_id", "scope"],
  "properties": {
    "policy_id": { "type": "string" },
    "scope": { "type": "string" },
    "owner_department": { "type": "string" },
    "review_cycle_days": { "type": "integer", "minimum": 0 }
  },
  "additionalProperties": false
}


3.2 risk

{
  "$id": "https://complisec.local/schemas/risk.custom.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Risk Custom Fields",
  "type": "object",
  "required": ["risk_id", "asset_id", "likelihood", "impact", "score_method", "inherent_score", "residual_score"],
  "properties": {
    "risk_id": { "type": "string" },
    "asset_id": { "type": "string" },
    "category": { "type": "string" },
    "likelihood": { "type": "string", "enum": ["very_low", "low", "medium", "high", "very_high"] },
    "impact": { "type": "string", "enum": ["very_low", "low", "medium", "high", "very_high"] },
    "score_method": { "type": "string", "enum": ["matrix_5x5", "cvss3", "cvss4"] },
    "inherent_score": { "type": "number", "minimum": 0 },
    "residual_score": { "type": "number", "minimum": 0 },
    "controls": {
      "type": "array",
      "items": { "type": "string" },
      "uniqueItems": true
    },
    "status": { "type": "string", "enum": ["identified", "assessed", "treated", "accepted", "closed"] }
  },
  "additionalProperties": false
}


3.3 incident

{
  "$id": "https://complisec.local/schemas/incident.custom.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Incident Custom Fields",
  "type": "object",
  "required": ["incident_id", "severity", "detected_at", "status"],
  "properties": {
    "incident_id": { "type": "string" },
    "severity": { "type": "string", "enum": ["low", "medium", "high", "critical"] },
    "detected_at": { "type": "string", "format": "date-time" },
    "contained_at": { "type": "string", "format": "date-time" },
    "status": { "type": "string", "enum": ["open", "investigating", "contained", "eradicated", "recovered", "closed"] },
    "affected_assets": { "type": "array", "items": { "type": "string" }, "uniqueItems": true },
    "root_cause": { "type": "string" },
    "lessons_learned": { "type": "string" }
  },
  "additionalProperties": false
}


3.4 asset

{
  "$id": "https://complisec.local/schemas/asset.custom.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Asset Custom Fields",
  "type": "object",
  "required": ["asset_id", "asset_type", "owner", "criticality"],
  "properties": {
    "asset_id": { "type": "string" },
    "asset_type": { "type": "string", "enum": ["hardware", "software", "data", "service", "personnel", "facility"] },
    "owner": { "type": "string" },
    "location": { "type": "string" },
    "inventory_number": { "type": "string" },
    "criticality": { "type": "string", "enum": ["low", "medium", "high", "mission_critical"] }
  },
  "additionalProperties": false
}


3.5 control

{
  "$id": "https://complisec.local/schemas/control.custom.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Control Custom Fields",
  "type": "object",
  "required": ["control_id", "family", "implementation_state"],
  "properties": {
    "control_id": { "type": "string" },
    "family": { "type": "string" },
    "implementation_state": { "type": "string", "enum": ["planned", "partially_implemented", "implemented", "not_applicable"] },
    "verification": { "type": "string", "enum": ["manual", "automated", "hybrid"] }
  },
  "additionalProperties": false
}


3.6 training_material

{
  "$id": "https://complisec.local/schemas/training.custom.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Training Material Custom Fields",
  "type": "object",
  "required": ["material_id", "material_type", "audience"],
  "properties": {
    "material_id": { "type": "string" },
    "material_type": { "type": "string", "enum": ["policy_brief", "video", "slide_deck", "quiz", "article"] },
    "duration_minutes": { "type": "integer", "minimum": 0 },
    "audience": { "type": "string" }
  },
  "additionalProperties": false
}


3.7 audit_record

{
  "$id": "https://complisec.local/schemas/audit.custom.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Audit Record Custom Fields",
  "type": "object",
  "required": ["audit_id", "activity", "actor", "result", "occurred_at"],
  "properties": {
    "audit_id": { "type": "string" },
    "activity": { "type": "string" },
    "actor": { "type": "string" },
    "result": { "type": "string", "enum": ["success", "failure", "partial"] },
    "occurred_at": { "type": "string", "format": "date-time" }
  },
  "additionalProperties": false
}

4) –ü—Ä–∏–º–µ—Ä—ã –≤–∞–ª–∏–¥–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

4.1 Policy

{
  "id": "a3b1e2f4-9c7d-4d1a-8a3f-8d4b6c9f1a23",
  "tenant_id": "9f1a2b3c-4d5e-4f60-8a7b-2c3d4e5f6a70",
  "doc_type": "policy",
  "title": "–ü–æ–ª–∏—Ç–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º",
  "summary": "–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.",
  "language": "ru",
  "tags": ["ISO27001", "AccessControl", "IAM"],
  "source": {
    "ingest_method": "upload",
    "origin_name": "access_control_policy.pdf",
    "origin_uri": "file:///policies/access_control_policy.pdf",
    "file_mime": "application/pdf",
    "checksum_sha256": "9a7c2dc01c3a78a9ce2c4d0f4b1e6a35d2d6f4a3b2c19c7e8f1d9a2b3c4d5e6f"
  },
  "version": { "number": "1.2.0", "status": "approved", "valid_from": "2025-01-10T00:00:00Z" },
  "classification": { "confidentiality": "internal", "integrity": "high", "availability": "medium" },
  "compliance_mappings": [
    { "standard": "ISO27001", "clause": "A.9.2.1", "level": "must" },
    { "standard": "ISO27002", "clause": "9.2", "level": "should" }
  ],
  "relations": { "related_ids": [] },
  "owners": { "author": "Security Office", "reviewers": ["IT Operations"], "approver": "CISO" },
  "content": {
    "format": "markdown",
    "body": "# 1. –¶–µ–ª—å\n–û–±–µ—Å–ø–µ—á–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º...\n\n# 2. –û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è\n–í—Å–µ –ò–° –∫–æ–º–ø–∞–Ω–∏–∏...",
    "sections": [
      { "number": "1", "title": "–¶–µ–ª—å", "text": "–û–±–µ—Å–ø–µ—á–∏—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º...", "anchor": "goal" },
      { "number": "2", "title": "–û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è", "text": "–í—Å–µ –ò–° –∫–æ–º–ø–∞–Ω–∏–∏...", "anchor": "scope" }
    ]
  },
  "custom": {
    "policy_id": "POL-AC-001",
    "scope": "–í—Å–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–∏",
    "owner_department": "Security",
    "review_cycle_days": 365
  },
  "created_at": "2025-01-10T12:00:00Z",
  "updated_at": "2025-06-15T09:30:00Z"
}


4.2 Risk

{
  "id": "0a1b2c3d-4e5f-4a6b-8c9d-0e1f2a3b4c5d",
  "tenant_id": "9f1a2b3c-4d5e-4f60-8a7b-2c3d4e5f6a70",
  "doc_type": "risk",
  "title": "–†–∏—Å–∫: –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π",
  "summary": "–§–∏—à–∏–Ω–≥ –∏ –ø–æ–¥–±–æ—Ä –ø–∞—Ä–æ–ª–µ–π –≤–µ–¥—É—Ç –∫ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏.",
  "language": "ru",
  "tags": ["risk", "IAM", "phishing"],
  "source": { "ingest_method": "manual", "origin_name": "risk_register" },
  "version": { "number": "1.0.0", "status": "approved" },
  "classification": { "confidentiality": "internal", "integrity": "high", "availability": "medium" },
  "compliance_mappings": [{ "standard": "ISO27001", "clause": "A.5", "level": "should" }],
  "owners": { "author": "Risk Manager", "reviewers": ["Security Office"], "approver": "CISO" },
  "content": { "format": "plain", "body": "–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —É–≥—Ä–æ–∑ –∏ –º–µ—Ä —Å–Ω–∏–∂–µ–Ω–∏—è." },
  "custom": {
    "risk_id": "RSK-0007",
    "asset_id": "AST-AD-001",
    "category": "Identity",
    "likelihood": "high",
    "impact": "high",
    "score_method": "matrix_5x5",
    "inherent_score": 20,
    "residual_score": 8,
    "controls": ["CTRL-MFA-001", "CTRL-PWD-002"],
    "status": "treated"
  },
  "created_at": "2025-02-01T10:00:00Z",
  "updated_at": "2025-08-21T08:45:00Z"
}


4.3 Incident

{
  "id": "6f7e8d9c-1b2a-4c3d-8e9f-0a1b2c3d4e5f",
  "tenant_id": "9f1a2b3c-4d5e-4f60-8a7b-2c3d4e5f6a70",
  "doc_type": "incident",
  "title": "–£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö CRM —á–µ—Ä–µ–∑ —Ñ–∏—à–∏–Ω–≥",
  "summary": "–ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂.",
  "language": "ru",
  "tags": ["incident", "phishing", "data_breach"],
  "source": { "ingest_method": "api", "origin_name": "siem" },
  "version": { "number": "1.0.0", "status": "approved" },
  "classification": { "confidentiality": "confidential", "integrity": "high", "availability": "medium" },
  "compliance_mappings": [{ "standard": "GDPR", "clause": "Art.33", "level": "must" }],
  "content": { "format": "markdown", "body": "## –•–æ–¥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞\n..." },
  "custom": {
    "incident_id": "INC-2025-0142",
    "severity": "critical",
    "detected_at": "2025-09-10T04:12:00Z",
    "contained_at": "2025-09-10T08:25:00Z",
    "status": "recovered",
    "affected_assets": ["AST-CRM-001"],
    "root_cause": "–§–∏—à–∏–Ω–≥-–ø–µ—Ä–µ—Ö–æ–¥ –ø–æ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–π —Å—Å—ã–ª–∫–µ",
    "lessons_learned": "–û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è MFA, —Ç—Ä–µ–Ω–∏–Ω–≥–∏ –ø–æ —Ñ–∏—à–∏–Ω–≥—É"
  },
  "created_at": "2025-09-10T09:00:00Z",
  "updated_at": "2025-09-12T15:20:00Z"
}

5) –ú–æ–¥–µ–ª—å —á–∞–Ω–∫–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–∞

–°—Ö–µ–º–∞ —á–∞–Ω–∫–∞

{
  "$id": "https://complisec.local/schemas/chunk.schema.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "CompliSec Chunk",
  "type": "object",
  "required": [
    "chunk_id",
    "parent_id",
    "tenant_id",
    "doc_type",
    "language",
    "content",
    "token_count",
    "chunk_index",
    "section_path",
    "created_at"
  ],
  "properties": {
    "chunk_id": {
      "type": "string",
      "description": "UUID v4",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
    },
    "parent_id": {
      "type": "string",
      "description": "id –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞",
      "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$"
    },
    "tenant_id": { "type": "string" },
    "doc_type": { "type": "string" },
    "language": { "type": "string" },
    "tags": { "type": "array", "items": { "type": "string" }, "uniqueItems": true },
    "compliance_mappings": {
      "type": "array",
      "items": { "type": "string" },
      "description": "–ü–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä ISO27001:A.9.2.1"
    },
    "section_path": { "type": "string", "description": "–ù–∞–ø—Ä. 1>2.3>–ü–ê–†–û–õ–ò" },
    "content": { "type": "string" },
    "token_count": { "type": "integer", "minimum": 0 },
    "chunk_index": { "type": "integer", "minimum": 0 },
    "overlap_with_prev": { "type": "integer", "minimum": 0 },
    "embedding_vector_ref": { "type": "string", "description": "–∫–ª—é—á/–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —ç–º–±–µ–¥–¥–∏–Ω–≥–∞" },
    "created_at": { "type": "string", "format": "date-time" }
  },
  "additionalProperties": false
}


–ü—Ä–∏–º–µ—Ä —á–∞–Ω–∫–∞

{
  "chunk_id": "c2b5f2a1-2f9a-4a74-9f8d-6d3e9f2a7b10",
  "parent_id": "a3b1e2f4-9c7d-4d1a-8a3f-8d4b6c9f1a23",
  "tenant_id": "9f1a2b3c-4d5e-4f60-8a7b-2c3d4e5f6a70",
  "doc_type": "policy",
  "language": "ru",
  "tags": ["ISO27001", "IAM"],
  "compliance_mappings": ["ISO27001:A.9.2.1", "ISO27002:9.2"],
  "section_path": "2>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É—á—ë—Ç–Ω—ã–º –∑–∞–ø–∏—Å—è–º",
  "content": "–£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–æ –∑–∞—è–≤–∫–µ... MFA –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞...",
  "token_count": 142,
  "chunk_index": 3,
  "overlap_with_prev": 40,
  "embedding_vector_ref": "qdrant:collections/complisec/points/c2b5f2a1",
  "created_at": "2025-06-15T09:30:05Z"
}

6) –ü—Ä–∞–≤–∏–ª–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞—Ä–µ–∑–∫–∏ (—Ä–∞–±–æ—á–∏–µ)

–û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞: —É–¥–∞–ª—è—Ç—å –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü, –∫–æ–ª–æ–Ω—Ç–∏—Ç—É–ª—ã, –º—É—Å–æ—Ä–Ω—ã–µ –ø–µ—Ä–µ–Ω–æ—Å—ã, —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ –º–∞—Ä–∫–¥–∞—É–Ω-—Ç–∞–±–ª–∏—Ü—ã.

–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: content.format = "markdown" –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª–µ–Ω.

–†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞: 800‚Äì1200 —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è ru/en; overlap 120‚Äì180 —Ç–æ–∫–µ–Ω–æ–≤.

–ì—Ä–∞–Ω–∏—Ü—ã —á–∞–Ω–∫–∞: —Å—Ç–∞—Ä–∞—Ç—å—Å—è —Ä–µ–∑–∞—Ç—å –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º #, ##, –ø–æ –∞–±–∑–∞—Ü–∞–º; –∏–∑–±–µ–≥–∞—Ç—å —Ä–∞–∑—Ä—ã–≤–∞ —Å–ø–∏—Å–∫–æ–≤.

–û–±–æ–≥–∞—â–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏: –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ —á–∞–Ω–∫ (doc_type, tags, –ø–ª–æ—Å–∫–∏–µ compliance_mappings).

–Ø–∑—ã–∫: —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å language –ø–æ BCP-47 (–Ω–∞–ø—Ä–∏–º–µ—Ä, ru, en).

–í–µ—Ä—Å–∏–æ–Ω–Ω–æ—Å—Ç—å: –ø—Ä–∏ —Å–º–µ–Ω–µ version.number ‚Äî –Ω–æ–≤—ã–π id –¥–æ–∫—É–º–µ–Ω—Ç–∞ (immutable –∑–∞–ø–∏—Å—å), –ª–∏–±–æ id –ø—Ä–µ–∂–Ω–∏–π, –Ω–æ version.status="deprecated" —É —Å—Ç–∞—Ä–æ–π –∑–∞–ø–∏—Å–∏. –î–ª—è RAG –ø—Ä–æ—â–µ —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∂–¥—É—é –≤–µ—Ä—Å–∏—é –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å version.status="approved".

7) –ú–∏–Ω–∏-—á–µ–∫-–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ –≤–∞—à –ø–∞–π–ø–ª–∞–π–Ω (CompliSec/RiskNexus)

–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã: PDF ‚Üí —Ç–µ–∫—Å—Ç (pdfplumber/pdftotext), DOCX ‚Üí —Ç–µ–∫—Å—Ç (python-docx/docx2txt), XLSX/CSV ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã ‚Üí Markdown.

–í–∞–ª–∏–¥–∞—Ü–∏—è: –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ –ë–î ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ Base Schema + –Ω—É–∂–Ω–æ–π –ø–æ–¥-—Å—Ö–µ–º—ã custom.

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è compliance_mappings: –º–∞–ø–ø–∏–Ω–≥ –∏–∑ —Å–ª–æ–≤–∞—Ä—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (–∫–ª–∞—É–∑-–∏–Ω–¥–µ–∫—Å).

–ß–∞–Ω–∫-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å: —É—á–∏—Ç—ã–≤–∞–µ—Ç sections –∏ —Ä–∞–∑–º–µ—Ä—ã; –ø–∏—à–µ—Ç chunks.jsonl.

–ò–Ω–¥–µ–∫—Å: –≤–µ–∫—Ç–æ—Ä–∫–∞ (Qdrant/Weaviate/Pinecone), —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ tenant_id, doc_type, tags, compliance_mappings.

–û—Ç–≤–µ—Ç—ã RAG: k-NN ‚Üí rerank ‚Üí —Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å —É—á—ë—Ç–æ–º classification.confidentiality.